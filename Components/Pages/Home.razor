@page "/"
@using BlazorApp.Models
@using BlazorApp.Services
@inject NavigationManager NavigationManager
@inject IStateBox<List<EmployeeModel>> EmployeeState

<link href="css/Home.css" rel="stylesheet" />

<RadzenHeading Size="H3" Style="color: #007bff; font-weight: bold;">
    📋 タスク一覧
</RadzenHeading>

<RadzenRow Class="justify-content-end mb-3">
    <RadzenColumn Width="auto">
        <RadzenButton 
            Text="社員を追加する" 
            Click="@NavigateToAddEmployee" 
            Icon="add_circle" 
            ButtonStyle="Radzen.ButtonStyle.Primary" 
            Style="font-weight: bold; padding: 8px 16px;" 
        />
    </RadzenColumn>
</RadzenRow>

<RadzenDataGrid Data="@EmployeeState.State" TItem="EmployeeModel" LoadData="LoadTask"
                Class="table table-striped table-hover border rounded shadow-sm" RowHover="true" ShowPagingSummary="true" AllowPaging="true" PageSize="10" Style="border: 1px solid #e5e5e5;">

    <Columns>
        <!-- 氏名 -->
        <RadzenDataGridColumn TItem="EmployeeModel" Property="Name" Title="氏名" Width="100px">
            <Template Context="employee">
                @employee.Name
            </Template>
        </RadzenDataGridColumn>

        <!-- 雇用形態 -->
        <RadzenDataGridColumn TItem="EmployeeModel" Property="Type" Title="雇用形態" Width="120px">
            <Template Context="employee">
                <span class="badge" style="background-color:@GetTypeColor(employee.Type)">
                    @employee.GetTypeText()
                </span>
            </Template>
        </RadzenDataGridColumn>

        <!-- 入社日 -->
        <RadzenDataGridColumn TItem="EmployeeModel" Property="JoiningDate" Title="入社日" Width="120px">
            <Template Context="employee">
                <span class="text-secondary">
                    📅 @employee.JoiningDate.ToShortDateString()
                </span>
            </Template>
        </RadzenDataGridColumn>

        <!-- 備考列 -->
        <RadzenDataGridColumn TItem="EmployeeModel" Property="Remarks" Title="備考" Width="300px">
            <Template Context="employee">
                @employee.Remarks.Split('\n')[0]
            </Template>
        </RadzenDataGridColumn>
    </Columns>
</RadzenDataGrid>

